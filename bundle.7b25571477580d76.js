(()=>{function t(e,t,n){return e+n*(t-e)}function n(e,t,n){return Math.max(t,Math.min(e,n))}const r=window.devicePixelRatio||1,a=Math.ceil(Math.min(window.innerWidth/12,340)),o=Math.ceil(a*window.innerHeight/window.innerWidth);var c=.02,u=.5;function f(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r)),e.deleteShader(r)}function d(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)}var s=[-1,-1],E=[-1,-1],g=[0,0];const h=500;function m(t){e=t.touches[0],-1==E[0]&&(s=[e.clientX/canvas.width*r,1-e.clientY/canvas.height*r]),E=[e.clientX/canvas.width*r,1-e.clientY/canvas.height*r],g=[g[0]+h*(E[0]-s[0]),g[1]+h*(E[1]-s[1])],w=v}var T=document.body,l=document.documentElement;function _(e){const t=b.createTexture();b.bindTexture(b.TEXTURE_2D,t);const n=b.RGBA32F,r=b.RGBA,i=b.FLOAT;return b.texImage2D(b.TEXTURE_2D,0,n,a,o,0,r,i,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),t}function R(){b.useProgram(J),b.disable(b.BLEND),b.bindFramebuffer(b.FRAMEBUFFER,se),b.framebufferTexture2D(b.FRAMEBUFFER,ge,b.TEXTURE_2D,M[de],Ee),b.viewport(0,0,a,o),b.enableVertexAttribArray(Q),b.bindBuffer(b.ARRAY_BUFFER,Z),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT);var e=b.FLOAT,t=0;b.vertexAttribPointer(N,2,e,!1,0,t),b.uniform2f($,a,o),b.uniform2f(ee,canvas.width,canvas.height),b.uniform1f(te,.00375),b.uniform1f(ne,c),b.uniform2f(re,.05*a*o,12),b.uniform1f(ie,u),b.uniform4f(ae,s[0],s[1],g[0],g[1]),b.uniform1f(oe,L),b.uniform1i(ce,(de+2)%3),b.uniform1i(ue,(de+1)%3),b.uniform1i(fe,3);var n=b.TRIANGLE_FAN;t=0,b.drawArrays(n,t,4),de=(de+1)%3,v+=.1/8}let A;Math.max(T.scrollHeight,T.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);var v=0,w=0,U=0,F=0,L=0,b=canvas.getContext("webgl2");let S;b||console.log("webgl2 not supported!"),b.getExtension("EXT_color_buffer_float")||console.log("sorry, can't render to floating point textures"),navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(S=!0,setMobileMode()):S=!1,window.addEventListener("resize",(function(){S?setMobileMode():(canvas.width=r*window.innerWidth,canvas.height=r*window.innerHeight)})),window.addEventListener("mousemove",(function(e){-1==E[0]&&(s=[e.clientX/canvas.width*r,1-e.clientY/canvas.height*r]),E=[e.clientX/canvas.width*r,1-e.clientY/canvas.height*r],g=[g[0]+h*(E[0]-s[0]),g[1]+h*(E[1]-s[1])],w=v})),window.addEventListener("wheel",(function(e){w=v})),window.addEventListener("touchmove",m),window.addEventListener("touchstart",m);const x=new Float32Array(function(){var e,t,n,r=[];for(i=0;i<o;i++)for(j=0;j<a;j++)e=2*(j/(a-1)-.5),t=2*(i/(o-1)-.5),n=Math.random()*(1/a),r.push(e),r.push(t),r.push(n),r.push(9699690);return r}());var B=_(x),D=_(x),P=_(x),X=_(x);const M=[B,D,P];var p,H=f(b,b.VERTEX_SHADER,drawVertexShaderSource),O=f(b,b.FRAGMENT_SHADER,drawFragmentShaderSource),I=d(b,H,O),N=b.getAttribLocation(I,"a_uv"),C=b.createBuffer();p=function(){var e=[];for(i=0;i<a;i++)for(j=0;j<o;j++)e.push(i),e.push(j);return e}();var y=a*o,Y=b.POINTS;b.bindBuffer(b.ARRAY_BUFFER,C),b.bufferData(b.ARRAY_BUFFER,new Float32Array(p),b.STATIC_DRAW);var W=b.getUniformLocation(I,"u_alpha"),G=b.getUniformLocation(I,"u_size"),V=b.getUniformLocation(I,"u_c0"),k=b.getUniformLocation(I,"u_resolution"),z=b.getUniformLocation(I,"s_state");{var q=f(b,b.VERTEX_SHADER,simVertexShaderSource),K=f(b,b.FRAGMENT_SHADER,simFragmentShaderSource),J=d(b,q,K),Q=b.getAttribLocation(J,"a_corner"),Z=b.createBuffer();const e=[-1,-1,1,-1,1,1,-1,1];b.bindBuffer(b.ARRAY_BUFFER,Z),b.bufferData(b.ARRAY_BUFFER,new Float32Array(e),b.STATIC_DRAW);var $=b.getUniformLocation(J,"u_grid"),ee=b.getUniformLocation(J,"u_resolution"),te=(b.getUniformLocation(J,"u_time"),b.getUniformLocation(J,"u_step_size")),ne=b.getUniformLocation(J,"u_drag"),re=b.getUniformLocation(J,"u_stiffness"),ie=b.getUniformLocation(J,"u_pullback"),ae=b.getUniformLocation(J,"u_mouse"),oe=b.getUniformLocation(J,"u_split"),ce=b.getUniformLocation(J,"s_last_state"),ue=b.getUniformLocation(J,"s_penultimate_state"),fe=b.getUniformLocation(J,"s_rest_state"),de=0}b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,B),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,D),b.activeTexture(b.TEXTURE2),b.bindTexture(b.TEXTURE_2D,P),b.activeTexture(b.TEXTURE3),b.bindTexture(b.TEXTURE_2D,X);var se=b.createFramebuffer();const Ee=0,ge=b.COLOR_ATTACHMENT0;v=0,canvas.width=r*window.innerWidth,canvas.height=r*window.innerHeight,loadData(),function e(a){for(null==A&&(A=a,U=0,w=a),u=t(.5,20,n((U=((v=a)-w)/1e3)/4,0,1)),c=t(.02,.2,n(U/4,0,1)),i=0;i<8;i++)R();s=[(2*s[0]+E[0])/3,(2*s[1]+E[1])/3],g=[.85*g[0],.85*g[1]],function(){b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,canvas.width,canvas.height),b.enable(b.BLEND),b.blendFunc(b.ONE,b.ONE),b.disable(b.DEPTH_TEST),b.clearColor(c1[0],c1[1],c1[2],0),b.clear(b.COLOR_BUFFER_BIT),b.useProgram(I),b.enableVertexAttribArray(N),b.bindBuffer(b.ARRAY_BUFFER,C);var e=b.FLOAT,t=0;b.vertexAttribPointer(N,2,e,!1,0,t),b.uniform1f(W,L),b.uniform1f(G,4*r),b.uniform2f(k,canvas.width,canvas.height),b.uniform3f(V,c0[0],c0[1],c0[2]),b.uniform1i(z,(de+2)%3);var n=Y,i=(t=0,y);b.drawArrays(n,t,i)}(),F=window.scrollY;let o=contentLoaded?document.getElementById("content").getBoundingClientRect().bottom:1/0;L=n(F/window.innerHeight,0,1)+n((-o+window.innerHeight)/window.innerHeight,0,1),window.requestAnimationFrame(e)}(0)})();
//# sourceMappingURL=bundle.7b25571477580d76.js.map